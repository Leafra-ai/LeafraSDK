cmake_minimum_required(VERSION 3.24)
project(test_model)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_BUILD_TYPE Release)

# Find the executorch libraries we built
add_executable(test_model test_model.cpp)

# Link against the libraries we built
target_link_libraries(test_model 
    ${CMAKE_CURRENT_SOURCE_DIR}/cmake-out/libexecutorch.a
    ${CMAKE_CURRENT_SOURCE_DIR}/cmake-out/libexecutorch_core.a
    ${CMAKE_CURRENT_SOURCE_DIR}/cmake-out/libportable_ops_lib.a
    ${CMAKE_CURRENT_SOURCE_DIR}/cmake-out/kernels/portable/libportable_kernels.a
)

# Include directories
target_include_directories(test_model PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}
)

# Add definitions
target_compile_definitions(test_model PRIVATE 
    C10_USING_CUSTOM_GENERATED_MACROS
    ET_LOG_ENABLED=1
    ET_MIN_LOG_LEVEL=Info
) 